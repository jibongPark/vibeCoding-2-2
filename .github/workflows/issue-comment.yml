name: Issue Auto Comment

on:
  issues:
    types: [opened, reopened]

jobs:
  comment:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read

    steps:
    - name: Add Issue Comment
      uses: actions/github-script@v7
      with:
        script: |
          const issueNumber = context.payload.issue.number;
          const author = context.payload.issue.user.login;
          const title = context.payload.issue.title;
          const labels = context.payload.issue.labels.map(label => label.name);
          
          let comment = `## ğŸ¯ ì´ìŠˆ ì ‘ìˆ˜ ì•Œë¦¼

          ì•ˆë…•í•˜ì„¸ìš” @${author}ë‹˜! ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

          **ì´ìŠˆ ì •ë³´:**
          - ì œëª©: ${title}
          - ì‘ì„±ì: @${author}
          - ì´ìŠˆ ë²ˆí˜¸: #${issueNumber}`;
          
          if (labels.length > 0) {
            comment += `\n- ë¼ë²¨: ${labels.join(', ')}`;
          }
          
          comment += `

          **ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤:**
          1. ì´ìŠˆ ë¶„ë¥˜ ë° ë¼ë²¨ë§
          2. ë‹´ë‹¹ì í• ë‹¹
          3. ìš°ì„ ìˆœìœ„ ì„¤ì •
          4. ê°œë°œ ì§„í–‰
          5. ì™„ë£Œ í›„ ì´ìŠˆ ì¢…ë£Œ

          **ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„:**`;
          
          // ë¼ë²¨ì— ë”°ë¥¸ ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„
          if (labels.includes('priority:high') || labels.includes('bug')) {
            comment += '\n- ğŸ”¥ ë†’ì€ ìš°ì„ ìˆœìœ„: 1-2ì¼ ë‚´ ì²˜ë¦¬';
          } else if (labels.includes('priority:medium') || labels.includes('feature')) {
            comment += '\n- âš¡ ì¤‘ê°„ ìš°ì„ ìˆœìœ„: 3-5ì¼ ë‚´ ì²˜ë¦¬';
          } else if (labels.includes('priority:low') || labels.includes('enhancement')) {
            comment += '\n- ğŸ“ ë‚®ì€ ìš°ì„ ìˆœìœ„: 1-2ì£¼ ë‚´ ì²˜ë¦¬';
          } else {
            comment += '\n- ğŸ“‹ ë¶„ë¥˜ í›„ ì•ˆë‚´ ì˜ˆì •';
          }
          
          comment += `

          **ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°:**
          - ì¬í˜„ ë‹¨ê³„ê°€ ë” ìì„¸íˆ í•„ìš”í•œ ê²½ìš° ë¬¸ì˜ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤
          - ìŠ¤í¬ë¦°ìƒ·ì´ë‚˜ ë¡œê·¸ê°€ ìˆë‹¤ë©´ ì¶”ê°€ ì²¨ë¶€ ë¶€íƒë“œë¦½ë‹ˆë‹¤

          ì§„í–‰ ìƒí™©ì€ ì´ ì´ìŠˆë¥¼ í†µí•´ ê³„ì† ì—…ë°ì´íŠ¸ ë“œë¦¬ê² ìŠµë‹ˆë‹¤! ğŸ’ª`;

          try {
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: comment
            });
            
            console.log(`ì´ìŠˆ #${issueNumber}ì— ìë™ ëŒ“ê¸€ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
          } catch (error) {
            console.log(`ëŒ“ê¸€ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
          } 